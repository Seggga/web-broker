# web-broker

1) проблема нейминга функций и универсальность создания объекта, удовлетворяющего интерфейсу service.repo
	а) репозитории (file, memory, postgres) разнес из одного пакета repository в три: repofile, repomem, repopg
	б) в каждом из пакетов переименовал функцию создания объекта на New
результат: 
 - функция main, как и прежде, определяет, с каким объектом будет работать сервис
 - для создания объекта используются функции с одним именем - New
 - для добавления новой сущности (другая БД/ другая структура в памяти...) не требуется вносить изменения в код пакетов service и endpoint, а только добавить новый пакет repo... c функцией New и при необходимости задействовать его в main.


2) проблемы в структуре пакетов
	а) repository: проблема нейминга - если разные объекты создаются в рамках одного пакета, и разработкой функционала этих объектов занимаются разные люди
возможное решение:
 - разнесение сущностей объектов и их функционала по соответствующим пакетам с использованием одинаковых имен экспортируемых функций (реализовано в рамках решения задания 1)

	б) endpoint: определяет маршалинг запросов. Количество запросов может быть большим, и хранение всех функций бизнес-логики в одном файле нецелесообразно.
возможное решение:
 - разнести файлы функций ( putToQueue() / getFromQueue() / ...) по разным файлам внутри пакета endpoint. В результате можно добавлять новые функции в отдельных файлах, не затрагивая файлы других функций.
И чтобы использовать новую функцию достаточно просто добавить/изменить одну строку в файле internal/app/endpoint/queue.go.
